<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Dashboard - Jobletters.xyz</title>
  
  <meta name="description" content="Administrator dashboard for managing pricing and viewing platform metrics for Jobletters.xyz.">

  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#0047ab">
 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
  
  <style>
    /* ------------------------------------- */
    /* GLOBAL & UTILITIES (Copied from index.html) */
    /* ------------------------------------- */
    :root {
      --primary: #0047ab;
      --secondary: #667eea;
      --accent: #ffd700;
      --bg-color: #f7f9fc;
      --text-color: #333;
      --card-bg: white;
      --gradient-main: linear-gradient(135deg, var(--primary) 0%, #0066cc 100%);
      --gradient-ai: linear-gradient(135deg, var(--secondary) 0%, #764ba2 100%);
      --success: #28a745;
      --danger: #dc3545;
    }
    * { box-sizing: border-box; scroll-behavior: smooth; }
    body { font-family: 'Montserrat', sans-serif; margin: 0; background-color: var(--bg-color); color: var(--text-color); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
    a { color: var(--primary); text-decoration: none; transition: color 0.3s ease; }
    a:hover { color: #0056b3; }
    .hidden { display: none !important; }

    /* HEADER & NAV */
    header { background: var(--gradient-main); color: white; display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.2); }
    .logo { font-size: 24px; font-weight: 700; display: flex; align-items: center; gap: 10px; }
    .logo i { color: var(--accent); margin-right: 8px; }
    .ai-badge { background: linear-gradient(135deg, #ff6b6b, var(--accent)); padding: 3px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; color: #000; }
    .hamburger { font-size: 28px; cursor: pointer; display: none; color: white; transition: transform 0.3s ease; }
    
    nav { display: flex; gap: 20px; }
    nav a { color: white; font-weight: 500; font-size: 16px; position: relative; }
    nav a::after { content: ''; position: absolute; width: 0%; height: 2px; bottom: -4px; left: 0; background-color: var(--accent); transition: width 0.3s ease; }
    nav a:hover::after { width: 100%; }
    
    @media (max-width: 768px) {
      nav { position: fixed; top: 60px; right: 0; background: var(--primary); height: calc(100% - 60px); width: 200px; flex-direction: column; padding: 20px; transform: translateX(100%); transition: transform 0.3s ease; box-shadow: -2px 0 6px rgba(0,0,0,0.2); }
      nav.open { transform: translateX(0); }
      nav a { padding: 15px 0; font-size: 18px; }
      .hamburger { display: block; }
    }

    /* CONTAINER & TYPOGRAPHY */
    .container { max-width: 1000px; background: var(--card-bg); margin: 40px auto 80px; padding: 30px 35px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.07); }
    h1 { font-weight: 700; color: var(--primary); margin-bottom: 12px; text-align: center; }
    h2 { color: var(--primary); margin-top: 35px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
    p { line-height: 1.6; }
    .button { background: var(--gradient-ai); border: none; color: white; font-weight: 700; padding: 15px 30px; border-radius: 6px; cursor: pointer; transition: background-color 0.3s ease, transform 0.2s ease; display: inline-block; margin-top: 25px; text-decoration: none; }
    .button:hover { opacity: 0.9; transform: scale(1.005); }

    /* FOOTER */
    footer { background-color: #222; color: #ccc; padding: 25px 20px; text-align: center; font-size: 14px; }
    footer a { color: var(--accent); font-weight: 600; }

    /* ------------------------------------- */
    /* ADMIN SPECIFIC STYLES */
    /* ------------------------------------- */
    
    /* Login Message */
    #admin-login-message {
        text-align: center;
        padding: 50px;
        background: #ffebeb;
        border: 1px solid var(--danger);
        border-radius: 8px;
        color: var(--danger);
    }
    #admin-login-message button {
        background-color: var(--danger);
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        margin-top: 15px;
        cursor: pointer;
    }
    
    /* Metrics Grid */
    .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 30px;
    }
    .metric-card {
        background: var(--card-bg);
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
    .metric-card i {
        font-size: 30px;
        color: var(--primary);
        margin-bottom: 10px;
    }
    .metric-card h4 {
        margin: 0;
        font-size: 1.5em;
        font-weight: 700;
        color: var(--text-color);
    }
    .metric-card p {
        margin: 5px 0 0;
        font-size: 0.9em;
        color: #777;
    }
    
    /* Configuration Section */
    .config-section {
        background: var(--bg-color);
        padding: 25px;
        border-radius: 8px;
        margin-top: 40px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    }
    .config-section label {
        display: block;
        font-weight: 600;
        margin-top: 15px;
    }
    .config-section input[type="text"], .config-section input[type="number"] {
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        width: 100%;
        max-width: 300px;
        margin-top: 5px;
        font-size: 16px;
    }
    .config-section button {
        background-color: var(--success);
        margin-top: 20px;
        width: 100%;
        max-width: 300px;
        padding: 12px;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo" aria-label="Jobletters.xyz Logo">
      <a href="/index.html" style="color: white; text-decoration: none; display: flex; align-items: center;">
        <i class="fas fa-envelope"></i> Jobletters.xyz
      </a>
      <span class="ai-badge">AI POWERED</span>
    </div>
    <div class="hamburger" id="hamburger" aria-label="Menu" role="button" tabindex="0">
      <i class="fas fa-bars"></i>
    </div>
    <nav id="navMenu" aria-label="Primary Navigation">
      <a href="/index.html">Home</a>
      <a href="/how-it-works.html">How It Works</a>
      <a href="/pricing.html">Pricing</a>
      <a href="/contact.html">Contact</a>
      <a href="/admin.html" id="adminLink" class="hidden">Admin</a>
    </nav>
  </header>

  <main class="container">
    <div id="admin-content">
      <h1><i class="fas fa-chart-line"></i> Admin Dashboard</h1>
      <p style="text-align: center;">Welcome, Administrator. Monitor platform performance and adjust pricing settings here.</p>
      
      <h2>Platform Metrics (Lifetime Mock Data)</h2>
      <div class="metrics-grid">
          <div class="metric-card">
              <i class="fas fa-money-bill-wave"></i>
              <h4 id="totalIncome">₦0</h4>
              <p>Total Income (Simulated)</p>
          </div>
          <div class="metric-card">
              <i class="fas fa-robot"></i>
              <h4 id="totalGenerations">0</h4>
              <p>Documents Generated (Drafts)</p>
          </div>
          <div class="metric-card">
              <i class="fas fa-download"></i>
              <h4 id="totalDownloads">0</h4>
              <p>Paid Downloads</p>
          </div>
          <div class="metric-card">
              <i class="fas fa-envelope-open-text"></i>
              <h4 id="totalEmails">0</h4>
              <p>Email Drafts Used</p>
          </div>
      </div>

      <h2>Pricing Configuration</h2>
      <div class="config-section">
          <form onsubmit="return saveSettings(event)">
              <label for="apiKey">Mock AI API Key (Required for generation)</label>
              <input type="text" id="apiKey" placeholder="e.g. sk-jobletters-admin-xxxxx" required>
              <small style="color:#777;">Must be set to enable the AI generator on the main page.</small>
              
              <label for="documentPrice">Price Per Document (₦)</label>
              <input type="number" id="documentPrice" min="100" placeholder="e.g. 500" required>
              <small style="color:#777;">This adjusts the price displayed and charged on the main page.</small>
              
              <button type="submit" class="button">
                  <i class="fas fa-save"></i> Save Settings
              </button>
          </form>
      </div>

      <h2>Clear Data</h2>
      <div class="config-section">
          <p>Use caution: This action clears all stored metrics and settings.</p>
          <button class="button" style="background-color: var(--danger);" onclick="clearAllData()">
              <i class="fas fa-trash-alt"></i> Clear All Mock Data & Metrics
          </button>
      </div>
      
    </div>
    
    <div id="admin-login-message" class="hidden">
        <h1>Access Denied</h1>
        <p>Please log in with the secret admin code to access the dashboard.</p>
        <button onclick="promptAdminLogin()"><i class="fas fa-lock"></i> Enter Secret Code</button>
        <p style="margin-top: 20px;">Hint: The secret code can also be entered via **Ctrl + Shift + A** (or **Cmd + Shift + A** on Mac) from the main page.</p>
    </div>

  </main>

  <footer>
    <p>&copy; 2025 Jobletters.xyz. All rights reserved.</p>
    <p>Powered by AI Technology</p>
  </footer>

  <script>
    const STORAGE_PREFIX = 'jobletters_';
    
    // Menu Toggle (FIXED)
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('navMenu');
    hamburger.addEventListener('click', () => navMenu.classList.toggle('open'));

    // --- Admin Access & Initialization ---
    function checkAdminAccess() {
        const hasAccess = localStorage.getItem(STORAGE_PREFIX + 'admin_access') === 'granted';
        const adminContent = document.getElementById('admin-content');
        const loginMessage = document.getElementById('admin-login-message');
        const adminLink = document.getElementById('adminLink');

        if (hasAccess) {
            adminContent.classList.remove('hidden');
            loginMessage.classList.add('hidden');
            adminLink.classList.remove('hidden');
            loadMetrics();
            loadSettings();
        } else {
            adminContent.classList.add('hidden');
            loginMessage.classList.remove('hidden');
            adminLink.classList.add('hidden');
        }
    }
    
    function promptAdminLogin() {
        const password = prompt("Admin Secret Code:");
        if (password === 'jobadmin2025') { 
            localStorage.setItem(STORAGE_PREFIX + 'admin_access', 'granted');
            alert("🔑 Access granted! Reloading dashboard.");
            checkAdminAccess(); // Reload the content
        } else if (password !== null) {
            alert("❌ Invalid Secret Code.");
        }
    }
    
    // --- Metric Display Logic ---
    function loadMetrics() {
        const income = parseInt(localStorage.getItem(STORAGE_PREFIX + 'income') || '0');
        const generations = parseInt(localStorage.getItem(STORAGE_PREFIX + 'generations') || '0');
        const downloads = parseInt(localStorage.getItem(STORAGE_PREFIX + 'downloads') || '0');
        const emails = parseInt(localStorage.getItem(STORAGE_PREFIX + 'emails') || '0');
        
        // Format income as currency
        const formattedIncome = new Intl.NumberFormat('en-NG', {
            style: 'currency',
            currency: 'NGN'
        }).format(income);

        document.getElementById('totalIncome').textContent = formattedIncome;
        document.getElementById('totalGenerations').textContent = generations;
        document.getElementById('totalDownloads').textContent = downloads;
        document.getElementById('totalEmails').textContent = emails;
    }

    // --- Settings Logic ---
    function loadSettings() {
        const apiKey = localStorage.getItem(STORAGE_PREFIX + 'api_key') || '';
        const price = localStorage.getItem(STORAGE_PREFIX + 'price') || '500';

        document.getElementById('apiKey').value = apiKey;
        document.getElementById('documentPrice').value = parseInt(price.replace('₦', ''));
    }

    function saveSettings(event) {
        event.preventDefault();
        
        const apiKey = document.getElementById('apiKey').value.trim();
        const priceInput = document.getElementById('documentPrice').value;
        const price = `₦${parseInt(priceInput)}`;

        if (!apiKey || isNaN(parseInt(priceInput))) {
            alert("Error: Please provide a mock API key and a valid price (number).");
            return false;
        }

        // Save settings to Local Storage
        localStorage.setItem(STORAGE_PREFIX + 'api_key', apiKey);
        localStorage.setItem(STORAGE_PREFIX + 'price', price);
        
        alert(`✅ Settings Saved!\nAI Key: ${apiKey}\nPrice set to: ${price}`);
        loadSettings(); // Reload settings display
        
        return false;
    }

    // --- Clear Data Function ---
    function clearAllData() {
        if (confirm("⚠️ WARNING: This will clear ALL mock metrics (Income, Generations, Downloads, Emails) and admin settings. Are you sure you want to proceed?")) {
            localStorage.removeItem(STORAGE_PREFIX + 'income');
            localStorage.removeItem(STORAGE_PREFIX + 'generations');
            localStorage.removeItem(STORAGE_PREFIX + 'downloads');
            localStorage.removeItem(STORAGE_PREFIX + 'emails');
            localStorage.removeItem(STORAGE_PREFIX + 'api_key');
            localStorage.setItem(STORAGE_PREFIX + 'price', '₦500'); // Reset price to default
            
            alert("✅ All mock data and settings have been reset.");
            loadMetrics(); // Update dashboard
            loadSettings(); // Update config fields
        }
    }

    // Run on page load
    window.onload = checkAdminAccess;
  </script>
</body>
</html>
